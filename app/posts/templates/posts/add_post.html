{% extends 'base.html' %}

{% block title %} Add New Post {% endblock %}

{% block content %}
<h2>{{ 'Edit' if form.title.data else 'Add' }} Post</h2>

<form method="POST" action="{{ url_for('posts.add_post') }}">
    {{ form.hidden_tag() }}
    {% from 'form_macros.html' import render_field %}

    <!-- Поля форми для заголовка та контенту -->
    {{ render_field(form.title) }}
    {{ render_field(form.content) }}
    
    <!-- Поля для вибору дати публікації та категорії -->
    <div class="form-group">
        <label for="{{ form.publish_date.id }}">{{ form.publish_date.label }}</label>
        <input type="datetime-local" id="{{ form.publish_date.id }}" name="{{ form.publish_date.name }}"
               class="form-control" value="{{ form.publish_date.data.strftime('%Y-%m-%dT%H:%M') if form.publish_date.data else '' }}">
    </div>
    
    {{ render_field(form.category) }}

    <!-- Поле для вибору автора -->
    <div class="form-group">
        <label for="{{ form.author_id.id }}">{{ form.author_id.label }}</label>
        <select name="{{ form.author_id.name }}" id="{{ form.author_id.id }}" class="form-control">
            {% for value, label in form.author_id.choices %}
                <option value="{{ value }}" {% if form.author_id.data == value %} selected {% endif %}>{{ label }}</option>
            {% endfor %}
        </select>
    </div>

    <!-- Поле для активації поста -->
    <div class="form-group form-check">
        {{ form.is_active(class="form-check-input") }}
        {{ form.is_active.label(class="form-check-label") }}
    </div>
    <div class="form-group">
        <label for="{{ form.tags.id }}">{{ form.tags.label }}</label>
        {{ form.tags(class="form-control") }}
    </div>
    <!-- Кнопка для підтвердження -->
    <div class="form-group">
        <button type="submit" class="btn btn-primary">{{ 'Update Post' if form.title.data else 'Create Post' }}</button>
    </div>
</form>

{% endblock %}
